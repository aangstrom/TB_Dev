{
  "entityType" : "CONVERTER",
  "entity" : {
    "additionalInfo" : {
      "description" : ""
    },
    "configuration" : {
      "scriptLang" : "TBEL",
      "decoder" : null,
      "tbelDecoder" : "// Parse JSON safely\r\nvar json = decodeToJson(payload);\r\nif (json == null) {\r\n  json = {};\r\n}\r\n\r\n// Telemetry object\r\nvar telemetry = {};\r\nvar attributes = {}; // none for now, but kept for symmetry\r\n\r\n// ---- PLC DATA: flatten fixed fields ----\r\n// Expected payload example:\r\n// {\"plcData\":{\"inp1\":0,\"relay1\":1,\"relay2\":0,\"relay3\":0,\"key\":0,\"resetStatus\":0}}\r\nif (json.plcData != null) {\r\n  var p = json.plcData;\r\n\r\n  // Only copy if present, force numeric\r\n  if (p.inp1         != null) telemetry.inp1         = p.inp1 * 1;\r\n  if (p.relay1       != null) telemetry.relay1       = p.relay1 * 1;\r\n  if (p.relay2       != null) telemetry.relay2       = p.relay2 * 1;\r\n  if (p.relay3       != null) telemetry.relay3       = p.relay3 * 1;\r\n  if (p.key          != null) telemetry.key          = p.key * 1;\r\n  if (p.resetStatus  != null) telemetry.resetStatus  = p.resetStatus * 1;\r\n}\r\n\r\n// Return in ThingsBoard format\r\nreturn {\r\n  deviceName: \"lab1 station2\",\r\n  deviceType: \"test\",\r\n  attributes: attributes,\r\n  telemetry: telemetry\r\n};",
      "encoder" : null,
      "tbelEncoder" : null,
      "updateOnlyKeys" : [ "manufacturer" ]
    },
    "converterVersion" : 1,
    "debugMode" : false,
    "debugSettings" : {
      "allEnabled" : false,
      "allEnabledUntil" : 1757409749296,
      "failuresEnabled" : true
    },
    "edgeTemplate" : false,
    "externalId" : null,
    "id" : {
      "entityType" : "CONVERTER",
      "id" : "69613010-8d5c-11f0-bb0f-799059dff0f8"
    },
    "integrationType" : "MQTT",
    "name" : "Uplink data converter for Apertura armadi makros",
    "type" : "UPLINK"
  },
  "relations" : [ ],
  "attributes" : {
    "SERVER_SCOPE" : [ ]
  }
}